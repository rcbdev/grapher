(function(e,t){var n=e.document,r=function(e,t){return new r.prototype.init(e,t)},i={barColours:["#7BCAE1","#FFBBBB","#FFFF99","#8CEFFD","#FF86FF","#B4D1B6"],lineColour:"#0072B5",lineWidth:2,axisColour:"#000000",axisWidth:2,wagonColours:["","#FFFFFF","#CF54FF","#FFFF2B","#1428FC","#FCAB14","#FF0D0D"],wagonBackground:"#7CD14B",wagonWidth:2,pieColours:["#7BCAE1","#FFBBBB","#FFFF99","#8CEFFD","#FF86FF","#B4D1B6"],pieBorderColour:"#000000",pieBorderWidth:2},s=function(e,t){var n,r={};for(n in e){if(e.hasOwnProperty(n)){if(t.hasOwnProperty(n)){r[n]=t[n]}else{r[n]=e[n]}}}return r},o=20,u=function(t,r){var i,s,o;i={x:0,y:0};s={x:r.offsetLeft,y:r.offsetTop};while(r=r.offsetParent){if(r.offsetLeft||r.offsetTop){s.x+=r.offsetLeft;s.y+=r.offsetTop}}if(e.getComputedStyle){o=getComputedStyle(n.body)}else{o=n.body.currentStyle}s.x+=parseInt(o.marginLeft);s.y+=parseInt(o.marginTop);if(t.pageX||t.pageY){i.x=t.pageX;i.y=t.pageY}else if(t.clientX||t.clientY){i.x=t.clientX+n.body.scrollLeft+n.documentElement.scrollLeft;i.y=t.clientY+n.body.scrollTop+n.documentElement.scrollTop}i.x-=s.x;i.y-=s.y;return i},a=function(e){var t,n;for(t=0,n=this.g.chartTypes.length;t<n;t++){switch(this.g.chartTypes[t]){case"pie":l.call(this,e);break}}},f=function(e){var t,n;for(t=0,n=this.g.chartTypes.length;t<n;t++){switch(this.g.chartTypes[t]){case"pie":c.call(this,e);break}}},l=function(e){if(this.g.piePixelData){var t,n,r,i,s;t=u(e,this);n=4*(t.x+t.y*this.width)+3;if(this.g.pieMouseOvers){for(r=0,i=this.g.pieMouseOvers.length;r<i;r++){if(this.g.pieMouseOvers[r].pixels[n]){if(this.getContext){s=this.getContext("2d");s.clearRect(0,0,this.width,this.height);s.putImageData(this.g.piePixelData,0,0);s.save();s.strokeStyle=this.g.options.pieBorderColour;s.lineWidth=this.g.options.pieBorderWidth;s.beginPath();s.moveTo(this.g.pieMouseOvers[r].x1,this.g.pieMouseOvers[r].y1);s.lineTo(this.g.pieMouseOvers[r].xc,this.g.pieMouseOvers[r].yc);s.lineTo(this.g.pieMouseOvers[r].x2,this.g.pieMouseOvers[r].y2);s.stroke();s.font="32px Calibri";s.fillStyle="#000000";s.textAlign="right";s.textBaseline="bottom";s.fillText(this.g.pieMouseOvers[r].value,this.width-15,this.height-15);s.restore()}return}}}if(this.getContext){s=this.getContext("2d");s.clearRect(0,0,this.width,this.height);s.putImageData(this.g.piePixelData,0,0)}}},c=function(e){if(this.g.piePixelData){var t;if(this.getContext){t=this.getContext("2d");t.clearRect(0,0,this.width,this.height);t.putImageData(this.g.piePixelData,0,0)}}};r.fn=r.prototype={init:function(t,r){var o;this.options=s(i,r||{});if(t.nodeType){o=t}else if(typeof t==="string"){o=n.getElementById(t)}this.element=o;this.element.g=this;this.chartTypes=[];if(n.addEventListener){o.addEventListener("mousemove",a,false);o.addEventListener("mouseout",f,false)}else if(n.attachEvent){o.attachEvent("onmousemove",function(){return a.call(o,e.event)});o.attachEvent("onmouseout",function(){return f.call(o,e.event)})}return this},drawAxes:function(e){var t,n,r,i,s,u,a,f,l;if(e.maxX){this.maxX=e.maxX}if(e.maxY){this.maxY=e.maxY}if(this.element.getContext){r=this.element.height-o;i=this.element.width-o;ctx=this.element.getContext("2d");ctx.save();ctx.strokeStyle=this.options.axisColour;ctx.lineWidth=this.options.axisWidth;ctx.fillStyle=this.options.axisColour;ctx.beginPath();ctx.moveTo(o,0);ctx.lineTo(o,r);ctx.lineTo(this.element.width,r);if(e.ticks){if(this.maxY){for(t=1;t<this.maxY+1;t++){a=e.bigTickY&&t%e.bigTickY==0?6:3;s=o;u=r-r*t/this.maxY;ctx.moveTo(s,u);ctx.lineTo(s-a,u)}}if(this.maxX){for(t=1;t<this.maxX+1;t++){a=e.bigTickX&&t%e.bigTickX==0?6:3;s=o+i*t/this.maxX;u=r;ctx.moveTo(s,u);ctx.lineTo(s,u+a)}}}ctx.stroke();ctx.font="12px Calibri";if(e.titleX){ctx.textAlign="center";ctx.textBaseline="top";ctx.fillText(e.titleX,o+i/2,r+7)}if(e.titleY){ctx.textAlign="left";ctx.textBaseline="top";f=e.titleY.split("");l=r/2-f.length/2*12;for(t=0,n=f.length;t<n;t++){ctx.fillText(f[t],2,l+t*12)}}ctx.restore()}return this},bar:function(e){var t,n,r,i,s,u,a,f,l;l={x:Math.round(o+this.options.axisWidth/2),y:Math.round(o+this.options.axisWidth/2)};r=this.element.width-l.x;i=this.element.height-l.y;f={x:0,y:0};if(this.maxX&&this.maxY){f.x=this.maxX;f.y=this.maxY}else{for(t=0,n=e.length;t<n;t++){if(e[t]>f.y){f.y=e[t]}}f.x=e.length;this.drawAxes({maxX:f.x,maxY:f.y,ticks:true,bigTickX:5,bigTickY:5})}s=r/f.x;if(this.element.getContext){a=this.element.getContext("2d");a.save();for(t=0,n=e.length;t<n;t++){u=Math.round(i*e[t]/f.y);a.fillStyle=this.options.barColours[t%this.options.barColours.length];a.fillRect(l.x+t*s,i-u,s,u)}a.restore()}return this},line:function(e){var t,n,r,i,s,u,a,f,l;l={x:Math.round(o+this.options.axisWidth/2),y:Math.round(o+this.options.axisWidth/2)};r=this.element.width-l.x;i=this.element.height-l.y;u={x:0,y:0};if(this.maxX&&this.maxY){u.x=this.maxX;u.y=this.maxY}else{for(t=0,n=e.length;t<n;t++){if(e[t].x>u.x){u.x=e[t].x}if(e[t].y>u.y){u.y=e[t].y}}this.drawAxes({maxX:u.x,maxY:u.y,ticks:true,bigTickX:5,bigTickY:5})}if(this.element.getContext){s=this.element.getContext("2d");s.save();s.strokeStyle=this.options.lineColour;s.lineWidth=this.options.lineWidth;s.beginPath();a=Math.round(r*e[0].x/u.x)+l.x;f=Math.round(i-i*e[0].y/u.y);s.moveTo(a,f);for(t=1,n=e.length;t<n;t++){a=Math.round(r*e[t].x/u.x)+l.x;f=Math.round(i-i*e[t].y/u.y);s.lineTo(a,f)}s.stroke();s.restore()}return this},wagon:function(e){var t,n,r,i,s,o,u,a,f;t={x:this.element.width/2,y:this.element.height/2};n=Math.min(t.x,t.y)-10;t.x=n+10;t.y=n+10;if(this.element.getContext){s=this.element.getContext("2d");s.save();s.fillStyle=this.options.wagonBackground;s.beginPath();s.arc(t.x,t.y,n,0,Math.PI*2,true);s.fill();s.font="12px Calibri";s.textAlign="left";s.textBaseline="middle";s.strokeStyle="#000000";s.lineWidth=1;s.fillStyle="#000000";s.fillText("Runs",this.element.width-28,6);for(r=1;r<7;r++){s.fillStyle=this.options.wagonColours[r];s.beginPath();s.arc(this.element.width-15,12*r+8,4,0,Math.PI*2,true);s.fill();s.stroke();s.fillStyle="#000000";s.fillText(r,this.element.width-8,12*r+8)}s.restore();s.save();s.lineWidth=this.options.wagonWidth;for(r=0,i=e.length;r<i;r++){if(e[r].runs>0){o=e[r].angle/180*Math.PI;f=e[r].length*n;u=t.x+Math.sin(o)*f;a=t.y-Math.cos(o)*f;s.strokeStyle=this.options.wagonColours[e[r].runs];s.beginPath();s.moveTo(t.x,t.y);s.lineTo(u,a);s.stroke()}}s.restore()}return this},pie:function(e){var t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;t={x:this.element.width/2,y:this.element.height/2};r=Math.min(t.x,t.y)-10;l=0;c=0;t.x=r+10;t.y=r+10;h=t.x+r;p=t.y;this.pieMouseOvers=[];for(i=0,s=e.length;i<s;i++){c+=e[i].value}m=n.createElement("canvas");m.width=this.element.width;m.height=this.element.height;if(!m.getContext&&G_vmlCanvasManager){G_vmlCanvasManager.initElement(m)}if(this.element.getContext){g=m.getContext("2d");g.fillStyle="#000000";a=this.element.getContext("2d");a.save();a.font="12px Calibri";a.textAlign="right";a.textBaseline="middle";for(i=0,s=e.length;i<s;i++){f=l+Math.PI*2*e[i].value/c;a.fillStyle=this.options.pieColours[i];d=t.x+Math.cos(f)*r;v=t.y+Math.sin(f)*r;a.beginPath();a.moveTo(t.x,t.y);a.lineTo(h,p);a.arc(t.x,t.y,r,l,f,false);a.lineTo(t.x,t.y);a.fill();if(g.getImageData){g.clearRect(0,0,m.width,m.height);g.beginPath();g.moveTo(t.x,t.y);g.lineTo(h,p);g.arc(t.x,t.y,r,l,f,false);g.lineTo(t.x,t.y);g.fill();b=g.measureText(e[i].key).width+15;g.fillRect(this.element.width-b,12*i+2,b,12);y=g.getImageData(0,0,m.width,m.height).data;this.pieMouseOvers.push({value:e[i].value,x1:h,y1:p,x2:d,y2:v,xc:t.x,yc:t.y,pixels:{}});for(o=3,u=y.length;o<u;o+=4){if(y[o]){this.pieMouseOvers[i].pixels[o]=1}}}a.strokeStyle="#000000";a.lineWidth=1;a.beginPath();a.arc(this.element.width-8,12*i+8,4,0,Math.PI*2,true);a.fill();a.stroke();a.fillStyle="#000000";a.fillText(e[i].key,this.element.width-15,12*i+8);l=f;h=d;p=v}a.strokeStyle=this.options.pieBorderColour;a.lineWidth=this.options.pieBorderWidth;a.beginPath();a.arc(t.x,t.y,r,0,Math.PI*2,true);a.stroke();if(a.getImageData){this.piePixelData=a.getImageData(0,0,this.element.width,this.element.height)}a.restore()}m=null;this.chartTypes.push("pie");return this},clear:function(){if(this.element.getContext){ctx=this.element.getContext("2d");ctx.clearRect(0,0,this.element.width,this.element.height)}if(this.pieMouseOvers){this.pieMouseOvers=t}if(this.chartTypes){this.chartTypes=[]}if(this.piePixelData){this.piePixelData=t}return this},resetAxes:function(){this.maxX=t;this.maxY=t;return this}};r.fn.init.prototype=r.fn;e.g=r})(this)